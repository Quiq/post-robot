!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("postRobot",[],t):"object"==typeof exports?exports.postRobot=t():n.postRobot=t()}("undefined"!=typeof self?self:this,function(){return function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:r})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=8)}([function(n,t,e){"use strict";function r(n){return"[object RegExp]"===Object.prototype.toString.call(n)}var o={MOCK:"mock:",FILE:"file:",ABOUT:"about:"},i="*",u={IFRAME:"iframe",POPUP:"popup"},c="Call was rejected by callee.\r\n";function a(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===o.FILE}function f(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===o.ABOUT}function d(n){if(n)try{if(n.parent&&n.parent!==n)return n.parent}catch(n){}}function s(n){if(n&&!d(n))try{return n.opener}catch(n){}}function l(n){try{return n&&n.location&&n.location.href,!0}catch(n){}return!1}function w(n){var t=(n=n||window).location;if(!t)throw new Error("Can not read window location");var e=t.protocol;if(!e)throw new Error("Can not read window protocol");if(e===o.FILE)return o.FILE+"//";if(e===o.ABOUT){var r=d(n);return r&&l(r)?w(r):o.ABOUT+"//"}var i=t.host;if(!i)throw new Error("Can not read window host");return e+"//"+i}function h(n){var t=w(n=n||window);return t&&n.mockDomain&&0===n.mockDomain.indexOf(o.MOCK)?n.mockDomain:t}function p(n){try{if(!n.location.href)return!0;if("about:blank"===n.location.href)return!0}catch(n){}return!1}function v(n){try{if(n===window)return!0}catch(n){}try{var t=Object.getOwnPropertyDescriptor(n,"location");if(t&&!1===t.enumerable)return!1}catch(n){}try{if(f(n)&&l(n))return!0}catch(n){}try{if(w(n)===w(window))return!0}catch(n){}return!1}function m(n){if(!v(n))return!1;try{if(n===window)return!0;if(f(n)&&l(n))return!0;if(h(window)===h(n))return!0}catch(n){}return!1}function g(n){if(!m(n))throw new Error("Expected window to be same domain");return n}function y(n){var t=[];try{for(;n.parent!==n;)t.push(n.parent),n=n.parent}catch(n){}return t}function b(n,t){if(!n||!t)return!1;var e=d(t);return e?e===n:-1!==y(t).indexOf(n)}function O(n){var t=[],e=void 0;try{e=n.frames}catch(t){e=n}var r=void 0;try{r=e.length}catch(n){}if(0===r)return t;if(r){for(var o=0;o<r;o++){var i=void 0;try{i=e[o]}catch(n){continue}t.push(i)}return t}for(var u=0;u<100;u++){var c=void 0;try{c=e[u]}catch(n){return t}if(!c)return t;t.push(c)}return t}function E(n){for(var t=[],e=0,r=O(n),o=null==r?0:r.length;e<o;e++){var i=r[e];t.push(i);for(var u=0,c=E(i),a=null==c?0:c.length;u<a;u++){var f=c[u];t.push(f)}}return t}function j(n){if(n){try{if(n.top)return n.top}catch(n){}if(d(n)===n)return n;try{if(b(window,n)&&window.top)return window.top}catch(n){}try{if(b(n,window)&&window.top)return window.top}catch(n){}for(var t=0,e=E(n),r=null==e?0:e.length;t<r;t++){var o=e[t];try{if(o.top)return o.top}catch(n){}if(d(o)===o)return o}}}function S(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return s(j(n)||n)}function _(){var n=S(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window);return n?_(n):top}function T(n){var t=j(n);if(!t)throw new Error("Can not determine top window");return[].concat(E(t),[t])}function A(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=T(n),e=S(n);return e?[].concat(A(e),t):t}function W(n){return n===j(n)}function I(n){if(!n.contentWindow)return!0;if(!n.parentNode)return!0;var t=n.ownerDocument;return!(!t||!t.documentElement||t.documentElement.contains(n))}var R=[],N=[];function P(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(n===window)return!1}catch(n){return!0}try{if(!n)return!0}catch(n){return!0}try{if(n.closed)return!0}catch(n){return!n||n.message!==c}if(t&&m(n))try{if(n.mockclosed)return!0}catch(n){}try{if(!n.parent||!n.top)return!0}catch(n){}var e=function(n,t){for(var e=0;e<n.length;e++)try{if(n[e]===t)return e}catch(n){}return-1}(R,n);if(-1!==e){var r=N[e];if(r&&I(r))return!0}return!1}function M(n){if(function(){for(var n=0;n<R.length;n++){var t=!1;try{t=R[n].closed}catch(n){}t&&(N.splice(n,1),R.splice(n,1))}}(),n&&n.contentWindow)try{R.push(n.contentWindow),N.push(n)}catch(n){}}function C(n){return(n=n||window).navigator.mockUserAgent||n.navigator.userAgent}function x(n,t){for(var e=O(n),r=0,o=null==e?0:e.length;r<o;r++){var i=e[r];try{if(m(i)&&i.name===t&&-1!==e.indexOf(i))return i}catch(n){}}try{if(-1!==e.indexOf(n.frames[t]))return n.frames[t]}catch(n){}try{if(-1!==e.indexOf(n[t]))return n[t]}catch(n){}}function k(n,t){var e=x(n,t);if(e)return e;for(var r=0,o=O(n),i=null==o?0:o.length;r<i;r++){var u=k(o[r],t);if(u)return u}}function D(n,t){var e;return(e=x(n,t))?e:k(j(n)||n,t)}function B(n,t){var e=d(t);if(e)return e===n;for(var r=0,o=O(n),i=null==o?0:o.length;r<i;r++)if(o[r]===t)return!0;return!1}function L(n,t){return n===s(t)}function U(n){return s(n=n||window)||d(n)||void 0}function F(n){for(var t=[],e=n;e;)(e=U(e))&&t.push(e);return t}function z(n,t){var e=U(t);if(e)return e===n;if(t===n)return!1;if(j(t)===t)return!1;for(var r=0,o=O(n),i=null==o?0:o.length;r<i;r++)if(o[r]===t)return!0;return!1}function q(){return Boolean(s(window))}function H(){return Boolean(d(window))}function G(){return Boolean(!H()&&!q())}function K(n,t){for(var e=0,r=null==n?0:n.length;e<r;e++)for(var o=n[e],i=0,u=null==t?0:t.length;i<u;i++)if(o===t[i])return!0;return!1}function J(){for(var n=0,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;t;)(t=d(t))&&(n+=1);return n}function Y(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=n,r=0;r<t;r++){if(!e)return;e=d(e)}return e}function X(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Y(n,J(n)-t)}function $(n,t){var e=j(n)||n,r=j(t)||t;try{if(e&&r)return e===r}catch(n){}var o=T(n),i=T(t);if(K(o,i))return!0;var u=s(e),c=s(r);return!(u&&K(T(u),i)||(c&&K(T(c),o),1))}function Z(n,t){if("string"==typeof n){if("string"==typeof t)return n===i||t===n;if(r(t))return!1;if(Array.isArray(t))return!1}return r(n)?r(t)?n.toString()===t.toString():!Array.isArray(t)&&Boolean(t.match(n)):!!Array.isArray(n)&&(Array.isArray(t)?JSON.stringify(n)===JSON.stringify(t):!r(t)&&n.some(function(n){return Z(n,t)}))}function V(n){return Array.isArray(n)?"("+n.join(" | ")+")":r(n)?"RegExp("+n.toString():n.toString()}function Q(n){return n.match(/^(https?|mock|file):\/\//)?n.split("/").slice(0,3).join("/"):h()}function nn(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,o=void 0;return function i(){if(P(n))return o&&clearTimeout(o),t();r<=0?clearTimeout(o):(r-=e,o=setTimeout(i,e))}(),{cancel:function(){o&&clearTimeout(o)}}}function tn(n){try{if(n===window)return!0}catch(n){if(n&&n.message===c)return!0}try{if("[object Window]"===Object.prototype.toString.call(n))return!0}catch(n){if(n&&n.message===c)return!0}try{if(window.Window&&n instanceof window.Window)return!0}catch(n){if(n&&n.message===c)return!0}try{if(n&&n.self===n)return!0}catch(n){if(n&&n.message===c)return!0}try{if(n&&n.parent===n)return!0}catch(n){if(n&&n.message===c)return!0}try{if(n&&n.top===n)return!0}catch(n){if(n&&n.message===c)return!0}try{n&&n.__cross_domain_utils_window_check__}catch(n){return!0}return!1}function en(){return"undefined"!=typeof window&&void 0!==window.location}function rn(n){return!!en()&&h()===n}function on(n){return 0===n.indexOf(o.MOCK)}function un(n){if(!on(Q(n)))return n;throw new Error("Mock urls not supported out of test mode")}e.d(t,!1,function(){return a}),e.d(t,!1,function(){return f}),e.d(t,"h",function(){return d}),e.d(t,"g",function(){return s}),e.d(t,!1,function(){return l}),e.d(t,"b",function(){return w}),e.d(t,"d",function(){return h}),e.d(t,!1,function(){return p}),e.d(t,"j",function(){return v}),e.d(t,"m",function(){return m}),e.d(t,!1,function(){return g}),e.d(t,!1,function(){return y}),e.d(t,!1,function(){return b}),e.d(t,!1,function(){return O}),e.d(t,!1,function(){return E}),e.d(t,!1,function(){return j}),e.d(t,!1,function(){return S}),e.d(t,!1,function(){return _}),e.d(t,!1,function(){return T}),e.d(t,!1,function(){return A}),e.d(t,!1,function(){return W}),e.d(t,!1,function(){return I}),e.d(t,"p",function(){return P}),e.d(t,"q",function(){return M}),e.d(t,"i",function(){return C}),e.d(t,"f",function(){return x}),e.d(t,!1,function(){return k}),e.d(t,!1,function(){return D}),e.d(t,!1,function(){return B}),e.d(t,"l",function(){return L}),e.d(t,"c",function(){return U}),e.d(t,!1,function(){return F}),e.d(t,"k",function(){return z}),e.d(t,!1,function(){return q}),e.d(t,!1,function(){return H}),e.d(t,!1,function(){return G}),e.d(t,!1,function(){return J}),e.d(t,!1,function(){return Y}),e.d(t,!1,function(){return X}),e.d(t,"n",function(){return $}),e.d(t,"r",function(){return Z}),e.d(t,"t",function(){return V}),e.d(t,"e",function(){return Q}),e.d(t,!1,function(){return nn}),e.d(t,"o",function(){return tn}),e.d(t,!1,function(){return en}),e.d(t,!1,function(){return rn}),e.d(t,!1,function(){return on}),e.d(t,"s",function(){return un}),e.d(t,!1,function(){return!0}),e.d(t,!1,function(){return o}),e.d(t,!1,function(){return i}),e.d(t,"a",function(){return u})},function(n,t,e){"use strict";var r,o={REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},i={SUCCESS:"success",ERROR:"error"},u={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"},c={POSTROBOT:"__postRobot__quiq__"},a={POST_MESSAGE:"postrobot_post_message",BRIDGE:"postrobot_bridge",GLOBAL:"postrobot_global"},f={MOCK:"mock:",FILE:"file:"},d={CROSS_DOMAIN_ZALGO_PROMISE:"cross_domain_zalgo_promise",CROSS_DOMAIN_FUNCTION:"cross_domain_function",CROSS_DOMAIN_WINDOW:"cross_domain_window"},s={BRIDGE_TIMEOUT:5e3,CHILD_WINDOW_TIMEOUT:5e3,ACK_TIMEOUT:2e3,ACK_TIMEOUT_KNOWN:1e4,RES_TIMEOUT:-1,ALLOWED_POST_MESSAGE_METHODS:(r={},r[a.POST_MESSAGE]=!0,r[a.BRIDGE]=!0,r[a.GLOBAL]=!0,r)};e.d(t,"b",function(){return s}),e.d(t,"e",function(){return o}),e.d(t,"c",function(){return i}),e.d(t,"d",function(){return u}),e.d(t,"j",function(){return c}),e.d(t,"g",function(){return a}),e.d(t,"f",function(){return f}),e.d(t,"a",function(){return"__postrobot_bridge__"}),e.d(t,!1,function(){return"__postrobot_proxy__"}),e.d(t,"i",function(){return"*"}),e.d(t,"h",function(){return d})},function(n,t,e){"use strict";function r(n){try{if(!n)return!1;if("undefined"!=typeof Promise&&n instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&n instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&n instanceof window.constructor)return!1;var t={}.toString;if(t){var e=t.call(n);if("[object Window]"===e||"[object global]"===e||"[object DOMWindow]"===e)return!1}if("function"==typeof n.then)return!0}catch(n){return!1}return!1}var o=[],i=[],u=0,c=void 0;function a(){if(!u&&c){var n=c;c=null,n.resolve()}}function f(){u+=1}function d(){u-=1,a()}var s=function(){function n(t){var e=this;if(function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],t){var r=void 0,o=void 0,i=!1,u=!1,c=!1;f();try{t(function(n){c?e.resolve(n):(i=!0,r=n)},function(n){c?e.reject(n):(u=!0,o=n)})}catch(n){return d(),void this.reject(n)}d(),c=!0,i?this.resolve(r):u&&this.reject(o)}}return n.prototype.resolve=function(n){if(this.resolved||this.rejected)return this;if(r(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},n.prototype.reject=function(n){var t=this;if(this.resolved||this.rejected)return this;if(r(n))throw new Error("Can not reject promise with another promise");if(!n){var e=n&&"function"==typeof n.toString?n.toString():Object.prototype.toString.call(n);n=new Error("Expected reject to be called with Error, got "+e)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){t.errorHandled||function(n,t){if(-1===o.indexOf(n)){o.push(n),setTimeout(function(){throw n},1);for(var e=0;e<i.length;e++)i[e](n,t)}}(n,t)},1),this.dispatch(),this},n.prototype.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},n.prototype.dispatch=function(){var t=this,e=this.dispatching,o=this.resolved,i=this.rejected,u=this.handlers;if(!e&&(o||i)){this.dispatching=!0,f();for(var c=function(e){var c=u[e],a=c.onSuccess,f=c.onError,d=c.promise,s=void 0;if(o)try{s=a?a(t.value):t.value}catch(n){return d.reject(n),"continue"}else if(i){if(!f)return d.reject(t.error),"continue";try{s=f(t.error)}catch(n){return d.reject(n),"continue"}}s instanceof n&&(s.resolved||s.rejected)?(s.resolved?d.resolve(s.value):d.reject(s.error),s.errorHandled=!0):r(s)?s instanceof n&&(s.resolved||s.rejected)?s.resolved?d.resolve(s.value):d.reject(s.error):s.then(function(n){d.resolve(n)},function(n){d.reject(n)}):d.resolve(s)},a=0;a<u.length;a++)c(a);u.length=0,this.dispatching=!1,d()}},n.prototype.then=function(t,e){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for success handler");if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for error handler");var r=new n;return this.handlers.push({promise:r,onSuccess:t,onError:e}),this.errorHandled=!0,this.dispatch(),r},n.prototype.catch=function(n){return this.then(void 0,n)},n.prototype.finally=function(t){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.finally expected a function");return this.then(function(e){return n.try(t).then(function(){return e})},function(e){return n.try(t).then(function(){throw e})})},n.prototype.timeout=function(n,t){var e=this;if(this.resolved||this.rejected)return this;var r=setTimeout(function(){e.resolved||e.rejected||e.reject(t||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(n){return clearTimeout(r),n})},n.prototype.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},n.resolve=function(t){return t instanceof n?t:r(t)?new n(function(n,e){return t.then(n,e)}):(new n).resolve(t)},n.reject=function(t){return(new n).reject(t)},n.asyncReject=function(t){return(new n).asyncReject(t)},n.all=function(t){var e=new n,o=t.length,i=[];if(!o)return e.resolve(i),e;for(var u=function(u){var c=t[u];if(c instanceof n){if(c.resolved)return i[u]=c.value,o-=1,"continue"}else if(!r(c))return i[u]=c,o-=1,"continue";n.resolve(c).then(function(n){i[u]=n,0==(o-=1)&&e.resolve(i)},function(n){e.reject(n)})},c=0;c<t.length;c++)u(c);return 0===o&&e.resolve(i),e},n.hash=function(t){var e={};return n.all(Object.keys(t).map(function(r){return n.resolve(t[r]).then(function(n){e[r]=n})})).then(function(){return e})},n.map=function(t,e){return n.all(t.map(e))},n.onPossiblyUnhandledException=function(n){return function(n){return i.push(n),{cancel:function(){i.splice(i.indexOf(n),1)}}}(n)},n.try=function(t,e,r){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.try expected a function");var o=void 0;f();try{o=t.apply(e,r||[])}catch(t){return d(),n.reject(t)}return d(),n.resolve(o)},n.delay=function(t){return new n(function(n){setTimeout(n,t)})},n.isPromise=function(t){return!!(t&&t instanceof n)||r(t)},n.flush=function(){return t=c=c||new n,a(),t;var t},n}();e.d(t,"a",function(){return s})},function(n,t,e){"use strict";function r(){return window.navigator.mockUserAgent||window.navigator.userAgent}function o(){return!!r().match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i)}function i(){var n=r();return/(iPhone|iPod|iPad|Macintosh).*AppleWebKit(?!.*Safari)/i.test(n)||/\bwv\b/.test(n)||/Android.*Version\/(\d)\.(\d)/i.test(n)}function u(){return!0===window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches}function c(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return-1!==n.indexOf("FBAN")||-1!==n.indexOf("FBAV")}function a(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return/FxiOS/i.test(n)}function f(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return/EdgiOS/i.test(n)}function d(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r()).indexOf("Opera Mini")>-1}function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return/Android/.test(n)}function l(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return/iPhone|iPod|iPad/.test(n)}function w(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return/\bGSA\b/.test(n)}function h(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return/QQBrowser/.test(n)}function p(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return!!l(n)&&(!!w(n)||/.+AppleWebKit(?!.*Safari)/.test(n))}function v(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return!!s(n)&&/Version\/[\d.]+/.test(n)&&!d(n)}function m(){return!!window.document.documentMode||Boolean(window.navigator&&window.navigator.userAgent&&/Edge|MSIE|rv:11/i.test(window.navigator.userAgent))}function g(){var n=window.document.querySelector('meta[http-equiv="X-UA-Compatible"]'),t=window.document.querySelector('meta[content="IE=edge"]');return!(!n||!t)}function y(){return!("undefined"==typeof process||!process.versions||!process.versions.electron)}function b(){if(window.document.documentMode)try{var n=window.status;return window.status="testIntranetMode","testIntranetMode"===window.status&&(window.status=n,!0)}catch(n){return!1}return!1}function O(){var n=r();return/Macintosh.*AppleWebKit(?!.*Safari)/i.test(n)}function E(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return!(p(n)||v(n)||d(n)||a(n)||f(n)||c(n)||h(n)||y()||O()||u())}var j=e(2),S=e(0),_=e(7),T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function A(n){if("function"==typeof btoa)return btoa(n);if("undefined"!=typeof Buffer)return Buffer.from(n,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}function W(n){if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob(n);if("undefined"!=typeof Buffer)return Buffer.from(n,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}function I(){var n="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return n.charAt(Math.floor(Math.random()*n.length))})+"_"+A((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function R(){if("undefined"!=typeof window)return window;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("No global found")}var N=void 0;function P(n){if(N=N||new _.a,null===n||void 0===n||"object"!==(void 0===n?"undefined":T(n))&&"function"!=typeof n)throw new Error("Invalid object");var t=N.get(n);return t||(t=(void 0===n?"undefined":T(n))+":"+I(),N.set(n,t)),t}function M(n){try{return JSON.stringify(Array.prototype.slice.call(n),function(n,t){return"function"==typeof t?"memoize["+P(t)+"]":t})}catch(n){throw new Error("Arguments not serializable -- can not be used to memoize")}}function C(n){var t=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new _.a;function o(){for(var t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];var u=r.getOrSet(e.thisNamespace?this:n,function(){return{}}),c=M(o),a=e.time;if(u[c]&&a&&Date.now()-u[c].time<a&&delete u[c],u[c])return u[c].value;var f=Date.now(),d=n.apply(this,arguments);return u[c]={time:f,value:d},u[c].value}return o.reset=function(){r.delete(e.thisNamespace?t:n)},e.name&&(o.displayName=e.name+":memoized"),o}function x(n){var t={};function e(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=M(r);return t.hasOwnProperty(i)?t[i]:(t[i]=n.apply(this,arguments).finally(function(){delete t[i]}),t[i])}return e.reset=function(){t={}},e}function k(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function e(){return j.a.try(n,this,arguments)}return t.name&&(e.displayName=t.name+":promisified"),e}function D(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=n.__inline_memoize_cache__=n.__inline_memoize_cache__||{},o=M(e);return r.hasOwnProperty(o)?r[o]:r[o]=t.apply(void 0,e)}function B(){}function L(n){var t=!1;return function(){if(!t)return t=!0,n.apply(this,arguments)}}function U(n){for(var t=0,e=0;e<n.length;e++)t+=n[e].charCodeAt(0)*Math.pow(e%10+1,5);return Math.floor(Math.pow(Math.sqrt(t),5))}function F(n){for(var t="",e=0;e<n.length;e++){var r=n[e].charCodeAt(0)*e;n[e+1]&&(r+=n[e+1].charCodeAt(0)*(e-1)),t+=String.fromCharCode(97+Math.abs(r)%26)}return t}function z(n,t){var e=n.match(t);if(e)return e[1]}function q(n,t){return new j.a(function(e){var r=n[t];if(r)return e(r);delete n[t],Object.defineProperty(n,t,{configurable:!0,set:function(n){(r=n)&&e(r)},get:function(){return r}})})}function H(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t>=3)return"stringifyError stack overflow";try{if(!n)return"<unknown error: "+Object.prototype.toString.call(n)+">";if("string"==typeof n)return n;if(n instanceof Error){var e=n&&n.stack,r=n&&n.message;if(e&&r)return-1!==e.indexOf(r)?e:r+"\n"+e;if(e)return e;if(r)return r}return"function"==typeof n.toString?n.toString():Object.prototype.toString.call(n)}catch(n){return"Error while stringifying error: "+H(n,t+1)}}function G(n){var t="<unknown error: "+Object.prototype.toString.call(n)+">";return n?n instanceof Error?n.message||t:"string"==typeof n.message&&n.message||t:t}function K(n){return"string"==typeof n?n:n&&"function"==typeof n.toString?n.toString():Object.prototype.toString.call(n)}function J(n,t){var e=(n=n.split("://")[1]).indexOf(t);return-1!==e&&n.slice(e)===t}function Y(n,t,e){var r=n[t];n[t]=function(){var n=this,t=arguments;return e({context:this,args:Array.prototype.slice.call(arguments),original:r,callOriginal:function(){return r.apply(n,t)}})}}function X(n,t){if(!t)return n;if(Object.assign)return Object.assign(n,t);for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function $(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(n[e]);return t}function Z(n,t){return Math.round(n*t/100)}function V(){return Math.min.apply(Math,arguments)}function Q(){return Math.max.apply(Math,arguments)}function nn(n,t,e){var r=[];return n.replace(t,function(n){r.push(e?e.apply(null,arguments):n)}),r}function tn(n){return"data:image/svg+xml;base64,"+A(n)}function en(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Boolean,e={};for(var r in n)n.hasOwnProperty(r)&&t(n[r],r)&&(e[r]=n[r]);return e}function rn(n){return n}function on(n,t){var e=[];return n.replace(t,function(n){return e.push(n),""}),e}function un(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,e=void 0,r=void 0;return function(){r&&clearTimeout(r);var o=e=e||new j.a;return r=setTimeout(function(){e=null,r=null,j.a.try(n).then(function(n){o.resolve(n)},function(n){o.reject(n)})},t),o}}function cn(n,t){var e=void 0;return function r(){e=setTimeout(function(){n(),r()},t)}(),{cancel:function(){clearTimeout(e)}}}function an(n){return Boolean(n.match(/^[0-9]+$/))}function fn(n){return Boolean(n.match(/^[0-9]+\.[0-9]+$/))}function dn(n){return n.toString()}function sn(n){return"true"===n||"false"!==n&&(an(n)?parseInt(n,10):fn(n)?parseFloat(n):n)}function ln(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var r in t=t?t+".":t,n)n.hasOwnProperty(r)&&void 0!==n[r]&&null!==n[r]&&"function"!=typeof n[r]&&(n[r]&&Array.isArray(n[r])&&n[r].length&&n[r].every(function(n){return"object"!==(void 0===n?"undefined":T(n))})?e[""+t+r+"[]"]=n[r].join(","):n[r]&&"object"===T(n[r])?e=ln(n[r],""+t+r,e):e[""+t+r]=dn(n[r]));return e}function wn(n){var t={};for(var e in n)if(n.hasOwnProperty(e)&&"string"==typeof n[e]){var r=n[e];e.match(/^.+\[\]$/)?(e=e.slice(0,e.length-2),r=r.split(",").map(sn)):r=sn(r);for(var o=t,i=e.split("."),u=0;u<i.length;u++){var c=i[u],a=u+1===i.length,f=!a&&an(i[u+1]);a?o[c]=r:o=o[c]=o[c]||(f?[]:{})}}return t}function hn(){var n={},t={};return{on:function(n,e){var r=t[n]=t[n]||[];r.push(e);var o=!1;return{cancel:function(){o||(o=!0,r.splice(r.indexOf(e),1))}}},once:function(n,t){var e=this.on(n,function(){e.cancel(),t()});return e},trigger:function(n){for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var i=t[n],u=[];if(i)for(var c=function(n,t){var e=i[n];u.push(j.a.try(function(){return e.apply(void 0,r)}))},a=0,f=null==i?0:i.length;a<f;a++)c(a);return j.a.all(u).then(B)},triggerOnce:function(t){if(n[t])return j.a.resolve();n[t]=!0;for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return this.trigger.apply(this,[t].concat(r))}}}function pn(n){return n.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()})}function vn(n){return n.replace(/-([a-z])/g,function(n){return n[1].toUpperCase()})}function mn(n){return n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()}function gn(n,t,e){if(!t)return e;for(var r=t.split("."),o=0;o<r.length;o++){if("object"!==(void 0===n?"undefined":T(n))||null===n)return e;n=n[r[o]]}return void 0===n?e:n}function yn(n,t){var e=cn(function(){(t-=100)<=0&&(e.cancel(),n())},100)}function bn(n,t,e){if(Array.isArray(n)){if("number"!=typeof t)throw new TypeError("Array key must be number")}else if("object"===(void 0===n?"undefined":T(n))&&null!==n&&"string"!=typeof t)throw new TypeError("Object key must be string");Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){delete n[t];var r=e();return n[t]=r,r},set:function(e){delete n[t],n[t]=e}})}function On(n){return"object"===(void 0===n?"undefined":T(n))&&null!==n}function En(n){return On(n)&&"[object Object]"===Object.prototype.toString.call(n)}function jn(n){if(!En(n))return!1;var t=n.constructor;if("function"!=typeof t)return!1;var e=t.prototype;return!!En(e)&&!!e.hasOwnProperty("isPrototypeOf")}function Sn(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Array.isArray(n)){for(var r=n.length,o=[],i=function(r){bn(o,r,function(){var o=e?e+"."+r:""+r,i=n[r],u=t(i,r,o);return(jn(u)||Array.isArray(u))&&(u=Sn(u,t,o)),u})},u=0;u<r;u++)i(u);return o}if(jn(n)){var c={},a=function(r){if(!n.hasOwnProperty(r))return"continue";bn(c,r,function(){var o=e?e+"."+r:""+r,i=n[r],u=t(i,r,o);return(jn(u)||Array.isArray(u))&&(u=Sn(u,t,o)),u})};for(var f in n)a(f);return c}throw new Error("Pass an object or array")}function _n(n,t,e,r){if(n.hasOwnProperty(e)){var o=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(t,e,o)}else t[e]=r}function Tn(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"string"==typeof n&&(n=new RegExp(n));var r=t.slice(e).match(n);if(r){var o=r.index,i=r[0];return{text:i,groups:r.slice(1),start:e+o,end:e+o+i.length,length:i.length,replace:function(n){return i?""+i.slice(0,e+o)+n+i.slice(o+i.length):""}}}}function An(n,t){for(var e=[],r=0;;){var o=Tn(n,t,r);if(!o)break;e.push(o),r=z.end}return e}function Wn(n){return null!==n&&void 0!==n}function In(n){return j.a.try(n).then(function(){return In(n)})}function Rn(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=void 0;return function(){var r=this,o=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(r,o)},t)}}function Nn(n){return"[object RegExp]"===Object.prototype.toString.call(n)}var Pn=function(n){var t=new _.a;return function(e){var r=this;return t.getOrSet(e,function(){return n.call(r,e)})}},Mn=function(n){var t=new _.a;return function(e){var r=this;return t.getOrSet(e,function(){return n.call(r,e).finally(function(){t.delete(e)})})}};function Cn(n,t,e){if(n.hasOwnProperty(t))return n[t];var r=e();return n[t]=r,r}function xn(n){var t=[],e=!1;return{set:function(t,r){return e||(n[t]=r,this.register(function(){delete n[t]})),r},register:function(n){e?n():t.push(L(n))},all:function(){var n=[];for(e=!0;t.length;){var r=t.pop();n.push(r())}return j.a.all(n).then(B)}}}function kn(n){var t=void 0,e=void 0;try{t=n()}catch(n){e=n}return{result:t,error:e}}function Dn(n,t){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}function Bn(n,t){if(null===t||void 0===t)throw new Error("Expected "+n+" to be present");return t}var Ln={ENTER:13},Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Fn=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n};function zn(){return Boolean(document.body)&&"complete"===document.readyState}function qn(n){return n.replace(/\?/g,"%3F").replace(/&/g,"%26").replace(/#/g,"%23").replace(/\+/g,"%2B")}function Hn(){return D(Hn,function(){return new j.a(function(n){zn()&&n(),window.addEventListener("load",function(){return n()})})})}function Gn(){return D(Gn,function(){return new j.a(function(n){if(zn())return n();var t=setInterval(function(){if(zn())return clearInterval(t),n()},10)})})}function Kn(){return Gn().then(function(){if(document.body)return document.body;throw new Error("Document ready but document.body not present")})}function Jn(n){return D(Jn,function(){var t={};if(!n)return t;if(-1===n.indexOf("="))return t;for(var e=0,r=n.split("&"),o=null==r?0:r.length;e<o;e++){var i=r[e];(i=i.split("="))[0]&&i[1]&&(t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]))}return t},[n])}function Yn(n){return Jn(window.location.search.slice(1))[n]}function Xn(n){return-1===n.indexOf("#")||0!==n.indexOf("#")&&n.split("#")[0]!==window.location.href.split("#")[0]}function $n(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(n).filter(function(t){return"string"==typeof n[t]}).map(function(t){return qn(t)+"="+qn(n[t])}).join("&")}function Zn(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&Object.keys(t).length?$n(Fn({},Jn(n),t)):n}function Vn(n){var t,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.query||{},o=e.hash||{},i=void 0,u=n.split("#");i=u[0],t=u[1];var c=i.split("?");i=c[0];var a=Zn(c[1],r),f=Zn(t,o);return a&&(i=i+"?"+a),f&&(i=i+"#"+f),i}function Qn(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return new j.a(function(e){t.location=n,Xn(n)||e()})}function nt(){var n=document.querySelector("meta[name=viewport]");return!(o()&&window.screen.width<660&&!n)}function tt(n){return Boolean(n.offsetWidth||n.offsetHeight||n.getClientRects().length)}function et(){return D(et,function(){return Boolean(window.performance&&performance.now&&performance.timing&&performance.timing.connectEnd&&performance.timing.navigationStart&&Math.abs(performance.now()-Date.now())>1e3&&performance.now()-(performance.timing.connectEnd-performance.timing.navigationStart)>0)})}function rt(){return Gn().then(function(){if(et()){var n=window.performance.timing;return n.connectEnd&&n.domInteractive?n.domInteractive-n.connectEnd:void 0}})}function ot(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#x2F;")}function it(){return"undefined"!=typeof window}function ut(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document;return Array.prototype.slice.call(t.querySelectorAll(n))}function ct(n,t){n.addEventListener("touchstart",B),n.addEventListener("click",t),n.addEventListener("keypress",function(n){if(n.keyCode===Ln.ENTER)return t(n)})}function at(n){var t=n.host,e=void 0===t?window.location.host:t,r=n.path;return D(at,function(){for(var n=""+e+r,t=Array.prototype.slice.call(document.getElementsByTagName("script")),o=0,i=null==t?0:t.length;o<i;o++){var u=t[o];if(u.src&&u.src.replace(/^https?:\/\//,"").split("?")[0]===n)return u}},[r])}function ft(){return D(ft,function(){try{if("undefined"==typeof window)return!1;if(window.localStorage){var n=Math.random().toString();window.localStorage.setItem("__test__localStorage__",n);var t=window.localStorage.getItem("__test__localStorage__");if(window.localStorage.removeItem("__test__localStorage__"),n===t)return!0}}catch(n){}return!1})}function dt(){var n=window.navigator,t=n.languages?Array.prototype.slice.apply(n.languages):[];return n.language&&t.push(n.language),n.userLanguage&&t.push(n.userLanguage),t.map(function(n){if(n&&n.match(/^[a-z]{2}[-_][A-Z]{2}$/)){var t=n.split(/[-_]/),e=t[0];return{country:t[1],lang:e}}return n&&n.match(/^[a-z]{2}$/)?{lang:n}:null}).filter(Boolean)}function st(n,t){n.appendChild(t)}function lt(n){return n instanceof window.Element||null!==n&&"object"===(void 0===n?"undefined":Un(n))&&1===n.nodeType&&"object"===Un(n.style)&&"object"===Un(n.ownerDocument)}function wt(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return lt(n)?n:"string"==typeof n?t.querySelector(n):void 0}function ht(n){var t=wt(n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:document);if(t)return t;throw new Error("Can not find element: "+K(n))}function pt(n){return new j.a(function(t,e){var r=K(n),o=wt(n);if(o)return t(o);if(zn())return e(new Error("Document is ready and element "+r+" does not exist"));var i=setInterval(function(){return(o=wt(n))?(clearInterval(i),t(o)):zn()?(clearInterval(i),e(new Error("Document is ready and element "+r+" does not exist"))):void 0},10)})}function vt(n){this.message=n}function mt(n,t){var e=t=t||{},r=e.width,o=e.height,i=0,u=0;r&&(window.outerWidth?u=Math.round((window.outerWidth-r)/2)+window.screenX:window.screen.width&&(u=Math.round((window.screen.width-r)/2))),o&&(window.outerHeight?i=Math.round((window.outerHeight-o)/2)+window.screenY:window.screen.height&&(i=Math.round((window.screen.height-o)/2)));var c=(t=Fn({top:i,left:u,width:r,height:o,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},t)).name||"";delete t.name;var a,f=Object.keys(t).map(function(n){if(t[n])return n+"="+K(t[n])}).filter(Boolean).join(","),d=void 0;try{d=window.open(n,c,f,!0)}catch(a){throw new vt("Can not open popup window - "+(a.stack||a.message))}if(Object(S.p)(d))throw new vt("Can not open popup window - blocked");return window.addEventListener("unload",function(){return d.close()}),d}function gt(n,t){try{n.document.open(),n.document.write(t),n.document.close()}catch(e){try{n.location="javascript: document.open(); document.write("+JSON.stringify(t)+"); document.close();"}catch(n){}}}function yt(n,t){var e=t.tagName.toLowerCase();if("html"!==e)throw new Error("Expected element to be html, got "+e);for(var r=n.document.documentElement;r.children&&r.children.length;)r.removeChild(r.children[0]);for(;t.children.length;)r.appendChild(t.children[0])}function bt(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.document;n.styleSheet?n.styleSheet.cssText=t:n.appendChild(e.createTextNode(t))}vt.prototype=Object.create(Error.prototype);var Ot=void 0;function Et(n){if((Ot=Ot||new _.a).has(n)){var t=Ot.get(n);if(t)return t}var e=new j.a(function(t,e){n.addEventListener("load",function(){Object(S.q)(n),t(n)}),n.addEventListener("error",function(r){n.contentWindow?t(n):e(r)})});return Ot.set(n,e),e}function jt(n){return Et(n).then(function(n){if(!n.contentWindow)throw new Error("Could not find window in iframe");return n.contentWindow})}function St(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments[2];n=n.toLowerCase();var r=document.createElement(n);if(t.style&&X(r.style,t.style),t.class&&(r.className=t.class.join(" ")),t.id&&r.setAttribute("id",t.id),t.attributes)for(var o=0,i=Object.keys(t.attributes),u=null==i?0:i.length;o<u;o++){var c=i[o];r.setAttribute(c,t.attributes[c])}if(t.styleSheet&&bt(r,t.styleSheet),e&&st(e,r),t.html)if("iframe"===n){if(!e||!r.contentWindow)throw new Error("Iframe html can not be written unless container provided and iframe in DOM");gt(r.contentWindow,t.html)}else r.innerHTML=t.html;return r}function _t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],e=n.attributes||{},r=n.style||{},o=St("iframe",{attributes:Fn({allowTransparency:"true"},e),style:Fn({backgroundColor:"transparent",border:"none"},r),html:n.html,class:n.class}),i=window.navigator.userAgent.match(/MSIE|Edge/i);return o.hasAttribute("id")||o.setAttribute("id",I()),Et(o),t&&ht(t).appendChild(o),(n.url||i)&&o.setAttribute("src",n.url||"about:blank"),o}function Tt(n,t,e){return n.addEventListener(t,e),{cancel:function(){n.removeEventListener(t,e)}}}function At(n,t,e){e=L(e);for(var r=0,o=null==t?0:t.length;r<o;r++){var i=t[r];n.addEventListener(i,e)}return{cancel:L(function(){for(var r=0,o=null==t?0:t.length;r<o;r++){var i=t[r];n.removeEventListener(i,e)}})}}var Wt=["webkit","moz","ms","o"];function It(n,t,e){n.style[t]=e;for(var r=mn(t),o=0,i=null==Wt?0:Wt.length;o<i;o++){var u=Wt[o];n.style[""+u+r]=e}}var Rt=["animationstart","webkitAnimationStart","oAnimationStart","MSAnimationStart"],Nt=["animationend","webkitAnimationEnd","oAnimationEnd","MSAnimationEnd"];function Pt(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;return new j.a(function(o,i){var u=ht(n);if(!u)return o();var c=!1,a=void 0,f=void 0,d=void 0,s=void 0;function l(){clearTimeout(a),clearTimeout(f),d.cancel(),s.cancel()}d=At(u,Rt,function(n){n.target===u&&n.animationName===t&&(clearTimeout(a),n.stopPropagation(),d.cancel(),c=!0,f=setTimeout(function(){l(),o()},r))}),s=At(u,Nt,function(n){if(n.target===u&&n.animationName===t)return l(),"string"==typeof n.animationName&&n.animationName!==t?i("Expected animation name to be "+t+", found "+n.animationName):o()}),It(u,"animationName",t),a=setTimeout(function(){if(!c)return l(),o()},200),e&&e(l)})}var Mt={DISPLAY:{NONE:"none",BLOCK:"block"},VISIBILITY:{VISIBLE:"visible",HIDDEN:"hidden"},IMPORTANT:"important"};function Ct(n){n.style.setProperty("visibility","")}function xt(n){n.style.setProperty("visibility",Mt.VISIBILITY.HIDDEN,Mt.IMPORTANT)}function kt(n){n.style.setProperty("display","")}function Dt(n){n.style.setProperty("display",Mt.DISPLAY.NONE,Mt.IMPORTANT)}function Bt(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Lt(n,t,e){var r=Pt(n,t,e);return kt(n),r}function Ut(n,t,e){return Pt(n,t,e).then(function(){Dt(n)})}function Ft(n,t){n.classList.add(t)}function zt(n,t){n.classList.remove(t)}function qt(n){return!n||!n.parentNode}function Ht(n,t){t=L(t);var e=void 0;return qt(n)?t():e=cn(function(){qt(n)&&(e.cancel(),t())},50),{cancel:function(){e&&e.cancel()}}}function Gt(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document,e=0,r=ut("script",n),o=null==r?0:r.length;e<o;e++){var i=r[e],u=i.parentNode;if(u){var c=t.createElement("script");c.text=i.textContent,u.replaceChild(c,i)}}}function Kt(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.width,o=void 0===r||r,i=e.height,u=void 0===i||i,c=e.interval,a=void 0===c?100:c,f=e.win,d=void 0===f?window:f,s=n.offsetWidth,l=n.offsetHeight;t({width:s,height:l});var w=function(){var e=n.offsetWidth,r=n.offsetHeight;(o&&e!==s||u&&r!==l)&&t({width:e,height:r}),s=e,l=r},h=void 0,p=void 0;return void 0!==d.ResizeObserver?(h=new d.ResizeObserver(w)).observe(n):void 0!==d.MutationObserver?((h=new d.MutationObserver(w)).observe(n,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),d.addEventListener("resize",w)):function n(){w(),p=setTimeout(n,a)}(),{cancel:function(){h.disconnect(),window.removeEventListener("resize",w),clearTimeout(p)}}}var Jt=12e5;function Yt(n){var t=n.name,e=n.lifetime,r=void 0===e?Jt:e;return D(Yt,function(){var n="__"+t+"_storage__",e=void 0;function o(t){var r=ft(),o=void 0;if(e&&(o=e),!o&&r){var i=window.localStorage.getItem(n);i&&(o=JSON.parse(i))}o||(o=R()[n]),o||(o={id:I()}),o.id||(o.id=I()),e=o;var u=t(o);return r?window.localStorage.setItem(n,JSON.stringify(o)):R()[n]=o,e=null,u}function i(n){return o(function(t){var e=t.__session__,o=Date.now();return e&&o-e.created>r&&(e=null),e||(e={guid:I(),created:o}),t.__session__=e,n(e)})}return{getState:o,getID:function(){return o(function(n){return n.id})},getSessionState:function(n){return i(function(t){return t.state=t.state||{},n(t.state)})},getSessionID:function(){return i(function(n){return n.guid})}}},[{name:t,lifetime:r}])}function Xt(){return Yt({name:"belter_experiment"})}function $t(n){return Xt().getSessionState(function(t){return t.loggedBeacons=t.loggedBeacons||[],-1===t.loggedBeacons.indexOf(n)&&(t.loggedBeacons.push(n),!0)})}var Zt={TEST:"test",CONTROL:"control",THROTTLE:"throttle"};function Vt(n){var t,e=n.name,r=n.sample,o=void 0===r?50:r,i=n.logTreatment,u=void 0===i?B:i,c=n.logCheckpoint,a=void 0===c?B:c,f=function(n){return Xt().getState(function(t){return t.throttlePercentiles=t.throttlePercentiles||{},t.throttlePercentiles[n]=t.throttlePercentiles[n]||Math.floor(100*Math.random()),t.throttlePercentiles[n]})}(e);t=f<o?Zt.TEST:o>=50||o<=f&&f<2*o?Zt.CONTROL:Zt.THROTTLE;var d=e+"_"+t,s=!1,l=!1;try{window.localStorage&&window.localStorage.getItem(e)&&(l=!0)}catch(n){}return{isEnabled:function(){return t===Zt.TEST||l},isDisabled:function(){return t!==Zt.TEST&&!l},getTreatment:function(){return d},log:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s?($t(e+"_"+d)&&u({name:e,treatment:d}),$t(e+"_"+d+"_"+n)&&a({name:e,treatment:d,checkpoint:n,payload:t}),this):this},logStart:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s=!0,this.log("start",n)},logComplete:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.log("complete",n)}}}function Qt(n){var t=n.name,e=n.version,r=void 0===e?"latest":e,o=R(),i="__"+t+"__"+r+"_global__",u=o[i]=o[i]||{};return{get:function(n,t){return t=t||{},u[n]=u[n]||t}}}var ne={CONTENT_TYPE:"content-type",ACCEPT:"accept"},te=[];function ee(n){var t=n.url,e=n.method,r=void 0===e?"get":e,o=n.headers,i=void 0===o?{}:o,u=n.json,c=n.data,a=n.body,f=n.win,d=void 0===f?window:f,s=n.timeout,l=void 0===s?0:s;return new j.a(function(n,e){if(u&&c||u&&a||c&&u)throw new Error("Only options.json or options.data or options.body should be passed");for(var o={},f=0,s=Object.keys(i),w=null==s?0:s.length;f<w;f++){var h=s[f];o[h.toLowerCase()]=i[h]}u?o[ne.CONTENT_TYPE]=o[ne.CONTENT_TYPE]||"application/json":(c||a)&&(o[ne.CONTENT_TYPE]=o[ne.CONTENT_TYPE]||"application/x-www-form-urlencoded; charset=utf-8"),o[ne.ACCEPT]=o[ne.ACCEPT]||"application/json";for(var p=0,v=null==te?0:te.length;p<v;p++)for(var m=(0,te[p])(),g=0,y=Object.keys(m),b=null==y?0:y.length;g<b;g++){var O=y[g];o[O.toLowerCase()]=m[O]}var E=new d.XMLHttpRequest;for(var j in E.addEventListener("load",function(){var o=function(){for(var n={},t=0,e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().split("\n"),r=null==e?0:e.length;t<r;t++){var o=e[t].split(":"),i=o[0],u=o.slice(1);n[i.toLowerCase()]=u.join(":").trim()}return n}(this.getAllResponseHeaders());if(!this.status)return e(new Error("Request to "+r.toLowerCase()+" "+t+" failed: no response status code."));var i=o["content-type"],u=i&&(0===i.indexOf("application/json")||0===i.indexOf("text/json")),c=this.responseText;try{c=JSON.parse(c)}catch(n){if(u)return e(new Error("Invalid json: "+this.responseText+"."))}var a={status:this.status,headers:o,body:c};return n(a)},!1),E.addEventListener("error",function(n){e(new Error("Request to "+r.toLowerCase()+" "+t+" failed: "+n.toString()+"."))},!1),E.open(r,t,!0),o)o.hasOwnProperty(j)&&E.setRequestHeader(j,o[j]);u?a=JSON.stringify(u):c&&(a=Object.keys(c).map(function(n){return encodeURIComponent(n)+"="+(c?encodeURIComponent(c[n]):"")}).join("&")),E.timeout=l,E.ontimeout=function(){e(new Error("Request to "+r.toLowerCase()+" "+t+" has timed out"))},E.send(a)})}function re(n){te.push(n)}function oe(n,t,e){e.value=C(e.value,{name:t,thisNamespace:!0})}function ie(n,t,e){e.value=k(e.value,{name:t})}function ue(n){return"string"==typeof n&&/^[0-9]+%$/.test(n)}function ce(n){return"string"==typeof n&&/^[0-9]+px$/.test(n)}function ae(n){if("number"==typeof n)return n;var t=n.match(/^([0-9]+)(px|%)$/);if(!t)throw new Error("Could not match css value from "+n);return parseInt(t[1],10)}function fe(n){return ae(n)+"px"}function de(n){return"number"==typeof n?fe(n):ue(n)?n:fe(n)}function se(n,t){return parseInt(n*ae(t)/100,10)}function le(n,t){if("number"==typeof n)return n;if(ue(n))return se(t,n);if(ce(n))return ae(n);throw new Error("Can not normalize dimension: "+n)}function we(n){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).timeout,e=[],r=[],o=setTimeout(function(){e&&r.push(j.a.asyncReject(new Error("Expected "+e[0]+" to be called")))},void 0===t?5e3:t),i=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;return e.push(n),function(){for(var o=this,i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];Dn(e,n);var a=kn(function(){return t.call.apply(t,[o].concat(u))}),f=a.result,d=a.error;if(d)throw r.push(j.a.asyncReject(d)),d;return r.push(j.a.resolve(f)),f}},u=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;return function(){r.push(j.a.asyncReject(new Error("Expected "+n+" to not be called")));for(var e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];return t.call.apply(t,[this].concat(o))}},c=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;return e.push(n),function(){for(var o=this,i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];Dn(e,n);var a=kn(function(){return t.call.apply(t,[o].concat(u))}),f=a.result,d=a.error;if(d)throw d;return r.push(j.a.resolve(f).then(function(){throw new Error("Expected "+n+" to throw an error")},B)),f}};return r.push(j.a.try(function(){return n({expect:i,avoid:u,expectError:c,error:u})})),function n(){return j.a.try(function(){if(r.length)return r.pop()}).then(function(){return r.length?n():e.length?j.a.delay(10).then(n):void 0})}().then(function(){clearTimeout(o)})}e.d(t,!1,function(){return r}),e.d(t,!1,function(){return o}),e.d(t,!1,function(){return i}),e.d(t,!1,function(){return u}),e.d(t,!1,function(){return c}),e.d(t,!1,function(){return a}),e.d(t,!1,function(){return f}),e.d(t,!1,function(){return d}),e.d(t,!1,function(){return s}),e.d(t,!1,function(){return l}),e.d(t,!1,function(){return w}),e.d(t,!1,function(){return h}),e.d(t,!1,function(){return p}),e.d(t,!1,function(){return v}),e.d(t,!1,function(){return m}),e.d(t,!1,function(){return g}),e.d(t,!1,function(){return y}),e.d(t,!1,function(){return b}),e.d(t,!1,function(){return O}),e.d(t,!1,function(){return E}),e.d(t,!1,function(){return zn}),e.d(t,!1,function(){return qn}),e.d(t,!1,function(){return Hn}),e.d(t,!1,function(){return Gn}),e.d(t,!1,function(){return Kn}),e.d(t,!1,function(){return Jn}),e.d(t,!1,function(){return Yn}),e.d(t,!1,function(){return Xn}),e.d(t,!1,function(){return $n}),e.d(t,!1,function(){return Zn}),e.d(t,!1,function(){return Vn}),e.d(t,!1,function(){return Qn}),e.d(t,!1,function(){return nt}),e.d(t,!1,function(){return tt}),e.d(t,!1,function(){return et}),e.d(t,!1,function(){return rt}),e.d(t,!1,function(){return ot}),e.d(t,!1,function(){return it}),e.d(t,!1,function(){return ut}),e.d(t,!1,function(){return ct}),e.d(t,!1,function(){return at}),e.d(t,!1,function(){return ft}),e.d(t,!1,function(){return dt}),e.d(t,!1,function(){return st}),e.d(t,!1,function(){return lt}),e.d(t,!1,function(){return wt}),e.d(t,!1,function(){return ht}),e.d(t,!1,function(){return pt}),e.d(t,!1,function(){return vt}),e.d(t,!1,function(){return mt}),e.d(t,!1,function(){return gt}),e.d(t,!1,function(){return yt}),e.d(t,!1,function(){return bt}),e.d(t,!1,function(){return Et}),e.d(t,!1,function(){return jt}),e.d(t,!1,function(){return St}),e.d(t,!1,function(){return _t}),e.d(t,"a",function(){return Tt}),e.d(t,!1,function(){return At}),e.d(t,!1,function(){return It}),e.d(t,!1,function(){return Pt}),e.d(t,!1,function(){return Ct}),e.d(t,!1,function(){return xt}),e.d(t,!1,function(){return kt}),e.d(t,!1,function(){return Dt}),e.d(t,!1,function(){return Bt}),e.d(t,!1,function(){return Lt}),e.d(t,!1,function(){return Ut}),e.d(t,!1,function(){return Ft}),e.d(t,!1,function(){return zt}),e.d(t,!1,function(){return qt}),e.d(t,!1,function(){return Ht}),e.d(t,!1,function(){return Gt}),e.d(t,!1,function(){return Kt}),e.d(t,!1,function(){return Vt}),e.d(t,!1,function(){return Qt}),e.d(t,!1,function(){return Yt}),e.d(t,!1,function(){return A}),e.d(t,!1,function(){return W}),e.d(t,"i",function(){return I}),e.d(t,!1,function(){return R}),e.d(t,!1,function(){return P}),e.d(t,!1,function(){return C}),e.d(t,"d",function(){return x}),e.d(t,!1,function(){return k}),e.d(t,!1,function(){return D}),e.d(t,"e",function(){return B}),e.d(t,"f",function(){return L}),e.d(t,!1,function(){return U}),e.d(t,!1,function(){return F}),e.d(t,!1,function(){return z}),e.d(t,!1,function(){return q}),e.d(t,"h",function(){return H}),e.d(t,!1,function(){return G}),e.d(t,!1,function(){return K}),e.d(t,!1,function(){return J}),e.d(t,!1,function(){return Y}),e.d(t,!1,function(){return X}),e.d(t,!1,function(){return $}),e.d(t,!1,function(){return Z}),e.d(t,!1,function(){return V}),e.d(t,!1,function(){return Q}),e.d(t,!1,function(){return nn}),e.d(t,!1,function(){return tn}),e.d(t,!1,function(){return en}),e.d(t,!1,function(){return rn}),e.d(t,!1,function(){return on}),e.d(t,!1,function(){return un}),e.d(t,"g",function(){return cn}),e.d(t,!1,function(){return an}),e.d(t,!1,function(){return fn}),e.d(t,!1,function(){return dn}),e.d(t,!1,function(){return sn}),e.d(t,!1,function(){return ln}),e.d(t,!1,function(){return wn}),e.d(t,!1,function(){return hn}),e.d(t,!1,function(){return pn}),e.d(t,!1,function(){return vn}),e.d(t,!1,function(){return mn}),e.d(t,!1,function(){return gn}),e.d(t,!1,function(){return yn}),e.d(t,!1,function(){return bn}),e.d(t,!1,function(){return On}),e.d(t,!1,function(){return En}),e.d(t,!1,function(){return jn}),e.d(t,!1,function(){return Sn}),e.d(t,!1,function(){return _n}),e.d(t,!1,function(){return Tn}),e.d(t,!1,function(){return An}),e.d(t,!1,function(){return Wn}),e.d(t,!1,function(){return In}),e.d(t,!1,function(){return Rn}),e.d(t,"c",function(){return Nn}),e.d(t,"j",function(){return Pn}),e.d(t,"k",function(){return Mn}),e.d(t,"b",function(){return Cn}),e.d(t,!1,function(){return xn}),e.d(t,!1,function(){return kn}),e.d(t,!1,function(){return Dn}),e.d(t,!1,function(){return Bn}),e.d(t,!1,function(){return ee}),e.d(t,!1,function(){return re}),e.d(t,!1,function(){return!0}),e.d(t,!1,function(){return oe}),e.d(t,!1,function(){return ie}),e.d(t,!1,function(){return ue}),e.d(t,!1,function(){return ce}),e.d(t,!1,function(){return ae}),e.d(t,!1,function(){return fe}),e.d(t,!1,function(){return de}),e.d(t,!1,function(){return se}),e.d(t,!1,function(){return le}),e.d(t,!1,function(){return we})},function(n,t,e){"use strict";e.d(t,"a",function(){return u}),t.c=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;function e(n){return c.getOrSet(n,t)}return{has:function(t){return e(t).hasOwnProperty(n)},get:function(t,r){var o=e(t);return o.hasOwnProperty(n)?o[n]:r},set:function(t,r){return e(t)[n]=r,r},del:function(t){delete e(t)[n]},getOrSet:function(t,r){var o=e(t);if(o.hasOwnProperty(n))return o[n];var i=r();return o[n]=i,i}}},t.b=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,e=Object(o.b)(u,n,t);return{has:function(n){return e.hasOwnProperty(n)},get:function(n,t){return e.hasOwnProperty(n)?e[n]:t},set:function(n,t){return e[n]=t,t},del:function(n){delete e[n]},getOrSet:function(n,t){if(e.hasOwnProperty(n))return e[n];var r=t();return e[n]=r,r},reset:function(){e=t()},keys:function(){return Object.keys(e)}}},e(0);var r=e(7),o=e(3),i=e(1),u=window[i.j.POSTROBOT]=window[i.j.POSTROBOT]||{},c=u.windowStore=u.windowStore||new r.a,a=function(){return{}}},function(n,t,e){"use strict";var r=e(0),o=e(2),i=e(3),u=e(1),c=e(4);c.a.instanceID=c.a.instanceID||Object(i.i)();var a=Object(c.c)("helloPromises");function f(n){return a.getOrSet(n,function(){return new o.a})}var d=Object(i.f)(function(){c.a.on(u.d.HELLO,{domain:u.i},function(n){var t=n.source,e=n.origin;return f(t).resolve({win:t,domain:e}),{instanceID:c.a.instanceID}})});function s(n){return c.a.send(n,u.d.HELLO,{instanceID:c.a.instanceID},{domain:u.i,timeout:-1}).then(function(t){var e=t.origin,r=t.data.instanceID;return f(n).resolve({win:n,domain:e}),{win:n,domain:e,instanceID:r}})}var l=Object(i.k)(function(n){return s(n).then(function(n){return n.instanceID})});function w(){d();var n=Object(r.c)();n&&s(n).catch(i.e)}function h(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",r=f(n);return-1!==t&&(r=r.timeout(t,new Error(e+" did not load after "+t+"ms"))),r}function p(){return!!Object(r.i)(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i)}var v=Object(c.c)("knownWindows");function m(n){v.set(n,!0)}function g(n){return v.get(n,!1)}e.d(t,"g",function(){return s}),e.d(t,"b",function(){return l}),e.d(t,"c",function(){return w}),e.d(t,"a",function(){return h}),e.d(t,"f",function(){return p}),e.d(t,"e",function(){return m}),e.d(t,"d",function(){return g})},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(2),o=e(0),i=e(3),u=e(1),c=e(4),a=Object(c.b)("tunnelWindows");function f(){return!!Object(o.i)(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function d(n){return!Object(o.n)(window,n)}function s(n,t){if(n){if(Object(o.d)()!==Object(o.e)(n))return!0}else if(t&&!Object(o.m)(t))return!0;return!1}function l(n){var t=n.win,e=n.domain;return!(!f()||e&&!s(e,t)||t&&!d(t))}function w(n){var t=(n=n||Object(o.e)(n)).replace(/[^a-zA-Z0-9]+/g,"_");return u.a+"_"+t}function h(){return Boolean(window.name&&window.name===w(Object(o.d)()))}c.a.openTunnelToParent=function(n){var t=n.name,e=n.source,r=n.canary,f=n.sendMessage,d=Object(o.h)(window);if(!d)throw new Error("No parent window found to open tunnel to");var s=function(n){var t=n.name,e=n.source,r=n.canary,u=n.sendMessage;!function(){for(var n=0,t=a.keys(),e=null==t?0:t.length;n<e;n++){var r=t[n],u=a[r];try{Object(i.e)(u.source)}catch(n){a.del(r);continue}Object(o.p)(u.source)&&a.del(r)}}();var c=Object(i.i)();return a.set(c,{name:t,source:e,canary:r,sendMessage:u}),c}({name:t,source:e,canary:r,sendMessage:f});return c.a.send(d,u.d.OPEN_TUNNEL,{name:t,sendMessage:function(){var n=a.get(s);try{Object(i.e)(n&&n.source)}catch(n){return void a.del(s)}if(n&&n.source&&!Object(o.p)(n.source)){try{n.canary()}catch(n){return}n.sendMessage.apply(this,arguments)}}},{domain:u.i})};var p=new r.a(function(n){if(window.document&&window.document.body)return n(window.document.body);var t=setInterval(function(){if(window.document&&window.document.body)return clearInterval(t),n(window.document.body)},10)}),v=Object(c.c)("remoteWindows");function m(n){v.getOrSet(n,function(){return new r.a})}function g(n){var t=v.get(n);if(!t)throw new Error("Remote window not found");return t}function y(n,t,e){g(n).resolve(function(r,i,u){if(r!==n)throw new Error("Remote window does not match window");if(!Object(o.r)(i,t))throw new Error("Remote domain "+i+" does not match domain "+t);e(u)})}function b(n,t){g(n).reject(t).catch(i.e)}function O(n,t,e){var r=Object(o.l)(window,n),i=Object(o.l)(n,window);if(!r&&!i)throw new Error("Can only send messages to and from parent and popup windows");return g(n).then(function(r){return r(n,t,e)})}var E=Object(i.j)(function(n){return r.a.try(function(){try{var t=Object(o.f)(n,w(Object(o.d)()));if(!t)return;return Object(o.m)(t)&&t[u.j.POSTROBOT]?t:new r.a(function(n){var e=void 0,r=void 0;e=setInterval(function(){if(t&&Object(o.m)(t)&&t[u.j.POSTROBOT])return clearInterval(e),clearTimeout(r),n(t)},100),r=setTimeout(function(){return clearInterval(e),n()},2e3)})}catch(n){}})});function j(){return r.a.try(function(){var n=Object(o.g)(window);if(n){var t=void 0;try{t=Object(o.d)(n)}catch(n){t=null}if(l({win:n,domain:t}))return m(n),E(n).then(function(t){return t?window.name?t[u.j.POSTROBOT].openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(n){try{Object(i.e)(window)}catch(n){return}if(window&&!window.closed)try{c.a.receiveMessage({data:n,origin:this.origin,source:this.source})}catch(n){r.a.reject(n)}}}).then(function(t){var e=t.source,r=t.origin,o=t.data;if(e!==n)throw new Error("Source does not match opener");y(e,r,o.sendMessage)}).catch(function(t){throw b(n,t),t}):b(n,new Error("Can not register with opener: window does not have a name")):b(n,new Error("Can not register with opener: no bridge found in opener"))})}})}var S=e(5),_=Object(c.b)("bridges"),T=Object(c.b)("bridgeFrames"),A=Object(c.b)("popupWindowsByName"),W=Object(c.c)("popupWindowsByWin");function I(n,t){return _.has(t||Object(o.e)(n))}function R(n,t){return t=t||Object(o.e)(n),_.getOrSet(t,function(){return r.a.try(function(){if(Object(o.d)()===t)throw new Error("Can not open bridge on the same domain as current domain: "+t);var e=w(t);if(Object(o.f)(window,e))throw new Error("Frame with name "+e+" already exists on page");var i=function(n,t){var e=document.createElement("iframe");return e.setAttribute("name",n),e.setAttribute("id",n),e.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),e.setAttribute("frameborder","0"),e.setAttribute("border","0"),e.setAttribute("scrolling","no"),e.setAttribute("allowTransparency","true"),e.setAttribute("tabindex","-1"),e.setAttribute("hidden","true"),e.setAttribute("title",""),e.setAttribute("role","presentation"),e.src=t,e}(e,n);return T.set(t,i),p.then(function(e){e.appendChild(i);var o=i.contentWindow;return function(n,t){c.a.on(u.d.OPEN_TUNNEL,{window:n,domain:t},function(n){var e=n.origin,o=n.data;if(e!==t)throw new Error("Domain "+t+" does not match origin "+e);if(!o.name)throw new Error("Register window expected to be passed window name");if(!o.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!A.has(o.name))throw new Error("Window with name "+o.name+" does not exist, or was not opened by this window");if(!A.get(o.name).domain)throw new Error("We do not have a registered domain for window "+o.name);if(A.get(o.name).domain!==e)throw new Error("Message origin "+e+" does not matched registered window origin "+A.get(o.name).domain);return y(A.get(o.name).win,t,o.sendMessage),{sendMessage:function(n){if(window&&!window.closed){var t=A.get(o.name);if(t)try{c.a.receiveMessage({data:n,origin:t.domain,source:t.win})}catch(n){r.a.reject(n)}}}}})}(o,t),new r.a(function(n,t){i.onload=n,i.onerror=t}).then(function(){return Object(S.a)(o,u.b.BRIDGE_TIMEOUT,"Bridge "+n)}).then(function(){return o})})})})}function N(n){for(var t=n.win,e=n.name,r=n.domain,i=0,u=A.keys(),c=null==u?0:u.length;i<c;i++){var a=u[i];Object(o.p)(A.get(a).win)&&A.del(a)}var f=W.getOrSet(t,function(){return e?A.getOrSet(e,function(){return{win:t,name:e}}):{win:t}});if(f.win&&f.win!==t)throw new Error("Different window already linked for window: "+(e||"undefined"));if(e){if(f.name&&f.name!==e)throw new Error("Different window already linked for name "+e+": "+f.name);f.name=e,A.set(e,f)}return r&&(f.domain=r,m(t)),W.set(t,f),f}function P(n,t){N({win:n,domain:Object(o.e)(t)})}var M=window.open;function C(){for(var n=0,t=T.keys(),e=null==t?0:t.length;n<e;n++){var r=t[n],o=T.get(r);o&&o.parentNode&&o.parentNode.removeChild(o)}T.reset(),_.reset()}window.open=function(n,t,e,r){var i=M.call(this,Object(o.s)(n),t,e,r);return i?(N({win:i,name:t,domain:n?Object(o.e)(n):null}),i):i},e.d(t,"openTunnelToOpener",function(){return j}),e.d(t,"needsBridgeForBrowser",function(){return f}),e.d(t,"needsBridgeForWin",function(){return d}),e.d(t,"needsBridgeForDomain",function(){return s}),e.d(t,"needsBridge",function(){return l}),e.d(t,"getBridgeName",function(){return w}),e.d(t,"isBridge",function(){return h}),e.d(t,"documentBodyReady",function(){return p}),e.d(t,"registerRemoteWindow",function(){return m}),e.d(t,"findRemoteWindow",function(){return g}),e.d(t,"registerRemoteSendMessage",function(){return y}),e.d(t,"rejectRemoteSendMessage",function(){return b}),e.d(t,"sendBridgeMessage",function(){return O}),e.d(t,"hasBridge",function(){return I}),e.d(t,"openBridge",function(){return R}),e.d(t,"linkWindow",function(){return N}),e.d(t,"linkUrl",function(){return P}),e.d(t,"destroyBridges",function(){return C})},function(n,t,e){"use strict";e.d({},"WeakMap",function(){return c});var r=e(0);function o(n,t){for(var e=0;e<n.length;e++)try{if(n[e]===t)return e}catch(n){}return-1}var i=Object.defineProperty,u=Date.now()%1e9,c=function(){function n(){if(function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),u+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+u,function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var n=new WeakMap,t={};return Object.freeze(t),n.set(t,"__testvalue__"),"__testvalue__"===n.get(t)}catch(n){return!1}}())try{this.weakmap=new WeakMap}catch(n){}this.keys=[],this.values=[]}return n.prototype._cleanupClosedWindows=function(){for(var n=this.weakmap,t=this.keys,e=0;e<t.length;e++){var o=t[e];if(Object(r.o)(o)&&Object(r.p)(o)){if(n)try{n.delete(o)}catch(n){}t.splice(e,1),this.values.splice(e,1),e-=1}}},n.prototype.isSafeToReadWrite=function(n){if(Object(r.o)(n))return!1;try{n&&n.self,n&&n[this.name]}catch(n){return!1}return!0},n.prototype.set=function(n,t){if(!n)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{e.set(n,t)}catch(n){delete this.weakmap}if(this.isSafeToReadWrite(n)){var r=this.name,u=n[r];u&&u[0]===n?u[1]=t:i(n,r,{value:[n,t],writable:!0})}else{this._cleanupClosedWindows();var c=this.keys,a=this.values,f=o(c,n);-1===f?(c.push(n),a.push(t)):a[f]=t}},n.prototype.get=function(n){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(n))return t.get(n)}catch(n){delete this.weakmap}if(!this.isSafeToReadWrite(n)){this._cleanupClosedWindows();var e=o(this.keys,n);if(-1===e)return;return this.values[e]}var r=n[this.name];if(r&&r[0]===n)return r[1]},n.prototype.delete=function(n){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.delete(n)}catch(n){delete this.weakmap}if(this.isSafeToReadWrite(n)){var e=n[this.name];e&&e[0]===n&&(e[0]=e[1]=void 0)}else{this._cleanupClosedWindows();var r=this.keys,i=o(r,n);-1!==i&&(r.splice(i,1),this.values.splice(i,1))}},n.prototype.has=function(n){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(n))return!0}catch(n){delete this.weakmap}if(this.isSafeToReadWrite(n)){var e=n[this.name];return!(!e||e[0]!==n)}return this._cleanupClosedWindows(),-1!==o(this.keys,n)},n.prototype.getOrSet=function(n,t){if(this.has(n))return this.get(n);var e=t();return this.set(n,e),e},n}();e.d(t,"a",function(){return c})},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};e.d(r,"markWindowKnown",function(){return i.e}),e.d(r,"serializeMessage",function(){return R}),e.d(r,"deserializeMessage",function(){return N}),e.d(r,"ProxyWindow",function(){return S}),e.d(r,"cleanUpWindow",function(){return wn}),e.d(r,"Promise",function(){return y.a}),e.d(r,"bridge",function(){return hn}),e.d(r,"parent",function(){return ln}),e.d(r,"send",function(){return en}),e.d(r,"requestPromises",function(){return nn}),e.d(r,"request",function(){return tn}),e.d(r,"sendToParent",function(){return rn}),e.d(r,"client",function(){return on}),e.d(r,"on",function(){return an}),e.d(r,"listen",function(){return cn}),e.d(r,"once",function(){return fn}),e.d(r,"listener",function(){return dn}),e.d(r,"CONFIG",function(){return a.b}),e.d(r,"disable",function(){return sn});var o,i=e(5),u=e(0),c=e(3),a=e(1),f={FUNCTION:"function",ERROR:"error",PROMISE:"promise",REGEX:"regex",DATE:"date",ARRAY:"array",OBJECT:"object",STRING:"string",NUMBER:"number",BOOLEAN:"boolean",NULL:"null",UNDEFINED:"undefined"},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function s(n){return"object"===(void 0===n?"undefined":d(n))&&null!==n&&"string"==typeof n.__type__}function l(n){return void 0===n?f.UNDEFINED:null===n?f.NULL:Array.isArray(n)?f.ARRAY:"function"==typeof n?f.FUNCTION:"object"===(void 0===n?"undefined":d(n))?n instanceof Error?f.ERROR:"function"==typeof n.then?f.PROMISE:"[object RegExp]"===Object.prototype.toString.call(n)?f.REGEX:"[object Date]"===Object.prototype.toString.call(n)?f.DATE:f.OBJECT:"string"==typeof n?f.STRING:"number"==typeof n?f.NUMBER:"boolean"==typeof n?f.BOOLEAN:void 0}function w(n,t){return{__type__:n,__val__:t}}var h,p=((o={})[f.FUNCTION]=function(){},o[f.ERROR]=function(n){var t=n.message,e=n.stack,r=n.code;return w(f.ERROR,{message:t,stack:e,code:r})},o[f.PROMISE]=function(){},o[f.REGEX]=function(n){return w(f.REGEX,n.source)},o[f.DATE]=function(n){return w(f.DATE,n.toJSON())},o[f.ARRAY]=function(n){return n},o[f.OBJECT]=function(n){return n},o[f.STRING]=function(n){return n},o[f.NUMBER]=function(n){return n},o[f.BOOLEAN]=function(n){return n},o[f.NULL]=function(n){return n},o),v={},m=((h={})[f.FUNCTION]=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},h[f.ERROR]=function(n){var t=n.message,e=n.stack,r=n.code,o=new Error(t);return o.code=r,o.stack=e+"\n\n"+o.stack,o},h[f.PROMISE]=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},h[f.REGEX]=function(n){return new RegExp(n)},h[f.DATE]=function(n){return new Date(n)},h[f.ARRAY]=function(n){return n},h[f.OBJECT]=function(n){return n},h[f.STRING]=function(n){return n},h[f.NUMBER]=function(n){return n},h[f.BOOLEAN]=function(n){return n},h[f.NULL]=function(n){return n},h),g={},y=e(2),b=e(4),O=Object(b.c)("winToProxyWindow"),E=Object(b.b)("idToProxyWindow");function j(){for(var n=0,t=E.keys(),e=null==t?0:t.length;n<e;n++){var r=t[n];E.get(r).shouldClean()&&E.del(r)}}var S=function(){function n(t,e){!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.isProxyWindow=!0,this.serializedWindow=t,this.actualWindowPromise=new y.a,e&&this.setWindow(e),this.serializedWindow.getInstanceID=Object(c.d)(this.serializedWindow.getInstanceID)}return n.prototype.getType=function(){return this.serializedWindow.type},n.prototype.isPopup=function(){return this.getType()===u.a.POPUP},n.prototype.isIframe=function(){return this.getType()===u.a.IFRAME},n.prototype.setLocation=function(n){var t=this;return y.a.try(function(){if(!t.actualWindow)return t.serializedWindow.setLocation(n);t.actualWindow.location=n}).then(function(){return t})},n.prototype.setName=function(n){var t=this;return y.a.try(function(){if(!t.actualWindow)return t.serializedWindow.setName(n);if(!Object(u.m)(t.actualWindow))throw new Error("Can not set name for window on different domain");t.actualWindow.name=n,t.actualWindow.frameElement&&t.actualWindow.frameElement.setAttribute("name",n),(0,e(6).linkWindow)({win:t.actualWindow,name:n})}).then(function(){return t})},n.prototype.close=function(){var n=this;return y.a.try(function(){if(!n.actualWindow)return n.serializedWindow.close();n.actualWindow.close()}).then(function(){return n})},n.prototype.focus=function(){var n=this;return y.a.try(function(){return n.actualWindow&&n.actualWindow.focus(),n.serializedWindow.focus()}).then(function(){return n})},n.prototype.isClosed=function(){var n=this;return y.a.try(function(){return n.actualWindow?Object(u.p)(n.actualWindow):n.serializedWindow.isClosed()})},n.prototype.setWindow=function(n){this.actualWindow=n,this.actualWindowPromise.resolve(n)},n.prototype.matchWindow=function(n){var t=this;return y.a.try(function(){return t.actualWindow?n===t.actualWindow:y.a.all([t.getInstanceID(),Object(i.b)(n)]).then(function(e){var r=e[0]===e[1];return r&&t.setWindow(n),r})})},n.prototype.unwrap=function(){return this.actualWindow||this},n.prototype.awaitWindow=function(){return this.actualWindowPromise},n.prototype.getInstanceID=function(){return this.actualWindow?Object(i.b)(this.actualWindow):this.serializedWindow.getInstanceID()},n.prototype.serialize=function(){return this.serializedWindow},n.prototype.shouldClean=function(){return this.actualWindow&&Object(u.p)(this.actualWindow)},n.unwrap=function(t){return n.isProxyWindow(t)?t.unwrap():t},n.serialize=function(t){return j(),n.toProxyWindow(t).serialize()},n.deserialize=function(t){return j(),E.getOrSet(t.id,function(){return new n(t)})},n.isProxyWindow=function(n){return Boolean(n&&n.isProxyWindow)},n.toProxyWindow=function(t){return j(),n.isProxyWindow(t)?t:O.getOrSet(t,function(){var r=Object(c.i)();return E.set(r,new n({id:r,type:Object(u.g)(t)?u.a.POPUP:u.a.IFRAME,getInstanceID:function(){return Object(i.b)(t)},close:function(){return y.a.try(function(){t.close()})},focus:function(){return y.a.try(function(){t.focus()})},isClosed:function(){return y.a.try(function(){return Object(u.p)(t)})},setLocation:function(n){return y.a.try(function(){if(Object(u.m)(t))try{if(t.location&&"function"==typeof t.location.replace)return void t.location.replace(n)}catch(n){}t.location=n})},setName:function(n){return y.a.try(function(){(0,e(6).linkWindow)({win:t,name:n}),t.name=n})}},t))})},n}(),_=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},T=Object(b.c)("methodStore"),A=Object(b.b)("proxyWindowMethods");b.a.listeningForFunctions=b.a.listeningForFunctions||!1;var W=Object(c.f)(function(){b.a.listeningForFunctions||(b.a.listeningForFunctions=!0,b.a.on(a.d.METHOD,{origin:a.i},function(n){var t=n.source,e=n.origin,r=n.data,o=r.id,i=r.name;return y.a.try(function(){var n=T.getOrSet(t,function(){return{}})[r.id]||A.get(o);if(!n)throw new Error("Could not find method '"+r.name+"' with id: "+r.id+" in "+Object(u.d)(window));var i=n.proxy,c=n.domain,a=n.val;if(!Object(u.r)(c,e))throw new Error("Method '"+r.name+"' domain "+JSON.stringify(n.domain)+" does not match origin "+e+" in "+Object(u.d)(window));return i?i.matchWindow(t).then(function(n){if(!n)throw new Error("Method call '"+r.name+"' failed - proxy window does not match source in "+Object(u.d)(window));return a}):a}).then(function(n){return n.apply({source:t,origin:e,data:r},r.args)}).then(function(n){return{result:n,id:o,name:i}})}))});function I(n,t,e,r){W();var o=Object(c.i)();return n=S.unwrap(n),S.isProxyWindow(n)?(A.set(o,{proxy:n,domain:t,val:e}),n.awaitWindow().then(function(n){A.del(o),T.getOrSet(n,function(){return{}})[o]={domain:t,val:e}})):T.getOrSet(n,function(){return{}})[o]={domain:t,val:e},w(a.h.CROSS_DOMAIN_FUNCTION,{id:o,name:e.name||r})}function R(n,t,e){var r;return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,e=JSON.stringify(n,function(n){var e=this[n];if(s(this))return e;var r=l(e);if(!r)return e;var o=t[r]||p[r];return o?o(e,n):e});return void 0===e?f.UNDEFINED:e}(e,((r={})[f.PROMISE]=function(e,r){return function(n,t,e,r){return w(a.h.CROSS_DOMAIN_ZALGO_PROMISE,{then:I(n,t,function(n,t){return e.then(n,t)},r)})}(n,t,e,r)},r[f.FUNCTION]=function(e,r){return I(n,t,e,r)},r[f.OBJECT]=function(n){return Object(u.o)(n)||S.isProxyWindow(n)?(t=n,w(a.h.CROSS_DOMAIN_WINDOW,S.serialize(t))):n;var t},r))}function N(n,t,e){var r;return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;if(n!==f.UNDEFINED)return JSON.parse(n,function(n,e){if(s(this))return e;var r=void 0,o=void 0;if(s(e)?(r=e.__type__,o=e.__val__):(r=l(e),o=e),!r)return o;var i=t[r]||m[r];return i?i(o,n):o})}(e,((r={})[a.h.CROSS_DOMAIN_ZALGO_PROMISE]=function(n){return t=n.then,new y.a(t);var t},r[a.h.CROSS_DOMAIN_FUNCTION]=function(e){return function(n,t,e){var r=e.id,o=e.name;function i(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y.a.try(function(){return S.isProxyWindow(n)?n.awaitWindow():n}).then(function(n){return b.a.send(n,a.d.METHOD,{id:r,name:o,args:e},_({domain:t},i))}).catch(function(n){throw n})}function u(){return i(Array.prototype.slice.call(arguments)).then(function(n){return n.data.result})}return u.fireAndForget=function(){return i(Array.prototype.slice.call(arguments),{fireAndForget:!0})},u.__name__=o,u.__xdomain__=!0,u.origin=t,u}(n,t,e)},r[a.h.CROSS_DOMAIN_WINDOW]=function(n){return t=n,S.deserialize(t);var t},r))}var P={};P[a.g.POST_MESSAGE]=function(n,t,e){(Array.isArray(e)?e:"string"==typeof e?[e]:[a.i]).map(function(t){if(0===t.indexOf(a.f.MOCK)){if(window.location.protocol===a.f.FILE)return a.i;if(!Object(u.j)(n))throw new Error("Attempting to send messsage to mock domain "+t+", but window is actually cross-domain");return Object(u.b)(n)}return 0===t.indexOf(a.f.FILE)?a.i:t}).forEach(function(e){return n.postMessage(t,e)})};var M=e(6),C=M.sendBridgeMessage,x=M.needsBridgeForBrowser,k=M.isBridge;P[a.g.BRIDGE]=function(n,t,e){if(x()||k()){if(Object(u.m)(n))throw new Error("Post message through bridge disabled between same domain windows");if(!1!==Object(u.n)(window,n))throw new Error("Can only use bridge to communicate between two different windows, not between frames");return C(n,e,t)}},P[a.g.GLOBAL]=function(n,t){if(Object(i.f)()){if(!Object(u.m)(n))throw new Error("Post message through global disabled between different domain windows");if(!1!==Object(u.n)(window,n))throw new Error("Can only use global to communicate between two different windows, not between frames");var e=n[a.j.POSTROBOT];if(!e)throw new Error("Can not find postRobot global on foreign window");return e.receiveMessage({source:window,origin:Object(u.d)(),data:t})}};var D=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n};function B(n,t,e){return y.a.try(function(){var r;if(Object(u.p)(n))throw new Error("Window is closed");var o=R(n,t,((r={})[a.j.POSTROBOT]=D({id:Object(c.i)()},e),r)),i=[];return y.a.map(Object.keys(P),function(e){return y.a.try(function(){if(!a.b.ALLOWED_POST_MESSAGE_METHODS[e])throw new Error("Strategy disallowed: "+e);return P[e](n,o,t)}).then(function(){return i.push(e+": success"),!0},function(n){return i.push(e+": "+Object(c.h)(n)+"\n"),!1})}).then(function(n){var t=n.some(Boolean),r=e.type+" "+e.name+" "+(t?"success":"error")+":\n  - "+i.join("\n  - ")+"\n";if(!t)throw new Error(r)})})}var L=Object(b.b)("responseListeners"),U=Object(b.c)("requestListeners"),F=Object(b.b)("erroredResponseListeners");b.a.WINDOW_WILDCARD=b.a.WINDOW_WILDCARD||new function(){};var z,q="__domain_regex__";function H(n){return L.get(n)}function G(n){L.del(n)}function K(n){return F.has(n)}function J(n){var t=n.name,e=n.win,r=n.domain;if(e===a.i&&(e=null),r===a.i&&(r=null),!t)throw new Error("Name required to get request listener");for(var o=0,i=[e,b.a.WINDOW_WILDCARD],c=null==i?0:i.length;o<c;o++){var f=i[o];if(f){var d=U.get(f);if(d){var s=d[t];if(s){if(r&&"string"==typeof r){if(s[r])return s[r];if(s[q])for(var l=0,w=s[q],h=null==w?0:w.length;l<h;l++){var p=w[l],v=p.regex,m=p.listener;if(Object(u.r)(v,r))return m}}if(s[a.i])return s[a.i]}}}}}var Y=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},X=((z={})[a.e.REQUEST]=function(n,t,e){var r=J({name:e.name,win:n,domain:t});function o(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.fireAndForget||Object(u.p)(n)?y.a.resolve():B(n,t,Y({type:r,hash:e.hash,name:e.name},o))}return y.a.all([o(a.e.ACK),y.a.try(function(){if(!r)throw new Error("No handler found for post message: "+e.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(u.r)(r.domain,t))throw new Error("Request origin "+t+" does not match domain "+r.domain.toString());var o=e.data;return r.handler({source:n,origin:t,data:o})}).then(function(n){return o(a.e.RESPONSE,{ack:a.c.SUCCESS,data:n})},function(n){return o(a.e.RESPONSE,{ack:a.c.ERROR,error:n})})]).then(c.e).catch(function(n){if(r&&r.handleError)return r.handleError(n);throw n})},z[a.e.ACK]=function(n,t,e){if(!K(e.hash)){var r=H(e.hash);if(!r)throw new Error("No handler found for post message ack for message: "+e.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(u.r)(r.domain,t))throw new Error("Ack origin "+t+" does not match domain "+r.domain.toString());r.ack=!0}},z[a.e.RESPONSE]=function(n,t,e){if(!K(e.hash)){var r=H(e.hash);if(!r)throw new Error("No handler found for post message response for message: "+e.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(u.r)(r.domain,t))throw new Error("Response origin "+t+" does not match domain "+Object(u.t)(r.domain));if(G(e.hash),e.ack===a.c.ERROR)return r.respond(e.error,null);if(e.ack===a.c.SUCCESS){var o=e.data;return r.respond(null,{source:n,origin:t,data:o})}}},z),$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Z=Object(b.b)("receivedMessages");function V(n){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!n.source)return}catch(n){return}var t=n.source,e=n.origin,r=function(n,t,e){var r=void 0;try{r=N(t,e,n)}catch(n){return}if(r&&"object"===(void 0===r?"undefined":$(r))&&null!==r&&(r=r[a.j.POSTROBOT])&&"object"===(void 0===r?"undefined":$(r))&&null!==r&&r.type&&"string"==typeof r.type&&X[r.type])return r}(n.data,t,e);r&&(Object(i.e)(t),Z.has(r.id)||(Z.set(r.id,!0),Object(u.p)(t)&&!r.fireAndForget||X[r.type](t,e,r)))}function Q(n){try{Object(c.e)(n.source)}catch(n){return}var t={source:n.source||n.sourceElement,origin:n.origin||n.originalEvent&&n.originalEvent.origin,data:n.data};if(t.source){if(!t.origin)throw new Error("Post message did not have origin domain");V(t)}}b.a.receiveMessage=V;var nn=Object(b.c)("requestPromises");function tn(n){return y.a.try(function(){if(!n.name)throw new Error("Expected options.name");var t=n.name,e=void 0,r=void 0;if("string"==typeof n.window){var o=document.getElementById(n.window);if(!o)throw new Error("Expected options.window "+Object.prototype.toString.call(n.window)+" to be a valid element id");if("iframe"!==o.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(n.window)+" to be an iframe");if(!o.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");e=o.contentWindow}else if(n.window instanceof HTMLIFrameElement){if("iframe"!==n.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(n.window)+" to be an iframe");if(n.window&&!n.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");n.window&&n.window.contentWindow&&(e=n.window.contentWindow)}else e=n.window;if(!e)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var f=e;r=n.domain||a.i;var d=n.name+"_"+Object(c.i)();if(Object(u.p)(f))throw new Error("Target window is closed");var s=!1,l=nn.getOrSet(f,function(){return[]}),w=y.a.try(function(){if(Object(u.k)(window,f))return Object(i.a)(f,n.timeout||a.b.CHILD_WINDOW_TIMEOUT)}).then(function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).domain;if(Object(c.c)(r)&&!n)return Object(i.g)(f)}).then(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).domain;if(Object(c.c)(r)){if(!Object(u.r)(r,e))throw new Error("Remote window domain "+e+" does not match regex: "+r.toString());r=e}if("string"!=typeof r&&!Array.isArray(r))throw new TypeError("Expected domain to be a string or array");var o=r;return new y.a(function(e,r){var c=void 0;if(n.fireAndForget||function(n,t){L.set(n,t)}(d,c={name:t,window:f,domain:o,respond:function(n,t){n||(s=!0,l.splice(l.indexOf(w,1))),n?r(n):e(t)}}),B(f,o,{type:a.e.REQUEST,hash:d,name:t,data:n.data,fireAndForget:Boolean(n.fireAndForget)}).catch(r),n.fireAndForget)return e();var h=Object(i.d)(f)?a.b.ACK_TIMEOUT_KNOWN:a.b.ACK_TIMEOUT,p=n.timeout||a.b.RES_TIMEOUT,v=h,m=p,g=100;setTimeout(function n(){if(!s){if(Object(u.p)(f))return c.ack?r(new Error("Window closed for "+t+" before response")):r(new Error("Window closed for "+t+" before ack"));if(v=Math.max(v-g,0),-1!==m&&(m=Math.max(m-g,0)),c.ack){if(-1===m)return;g=Math.min(m,2e3)}else{if(0===v)return r(new Error("No ack for postMessage "+t+" in "+Object(u.d)()+" in "+h+"ms"));if(0===m)return r(new Error("No response for postMessage "+t+" in "+Object(u.d)()+" in "+p+"ms"))}setTimeout(n,g)}},g)})});return w.catch(function(){!function(n){F.set(n,!0)}(d),G(d)}),l.push(w),w})}function en(n,t,e,r){return(r=r||{}).window=n,r.name=t,r.data=e,tn(r)}function rn(n,t,e){var r=Object(u.c)();return r?en(r,n,t,e):new y.a(function(n,t){return t(new Error("Window does not have a parent"))})}function on(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!n.window)throw new Error("Expected options.window");var t=n.window;return{send:function(e,r){return en(t,e,r,n)}}}b.a.send=en;var un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function cn(n){if(!n.name)throw new Error("Expected options.name");if(!n.handler)throw new Error("Expected options.handler");var t=n.name,e=n.window,r=n.domain,o={handler:n.handler,handleError:n.errorHandler||function(n){throw n},window:e,domain:r||a.i,name:t},i=function n(t,e){var r=t.name,o=t.win,i=t.domain;if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var u=[],f=0,d=o,s=null==d?0:d.length;f<s;f++){var l=d[f];u.push(n({name:r,domain:i,win:l},e))}return{cancel:function(){for(var n=0,t=null==u?0:u.length;n<t;n++)u[n].cancel()}}}if(Array.isArray(i)){for(var w=[],h=0,p=i,v=null==p?0:p.length;h<v;h++){var m=p[h];w.push(n({name:r,win:o,domain:m},e))}return{cancel:function(){for(var n=0,t=null==w?0:w.length;n<t;n++)w[n].cancel()}}}var g=J({name:r,win:o,domain:i});if(o&&o!==a.i||(o=b.a.WINDOW_WILDCARD),i=i||a.i,g)throw o&&i?new Error("Request listener already exists for "+r+" on domain "+i.toString()+" for "+(o===b.a.WINDOW_WILDCARD?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" for "+(o===b.a.WINDOW_WILDCARD?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" on domain "+i.toString()):new Error("Request listener already exists for "+r);var y=U.getOrSet(o,function(){return{}}),O=Object(c.b)(y,r,function(){return{}}),E=i.toString(),j=void 0,S=void 0;return Object(c.c)(i)?(j=Object(c.b)(O,q,function(){return[]}),S={regex:i,listener:e},j.push(S)):O[E]=e,{cancel:function(){delete O[E],S&&(j.splice(j.indexOf(S,1)),j.length||delete O[q]),Object.keys(O).length||delete y[r],o&&!Object.keys(y).length&&U.del(o)}}}({name:t,win:e,domain:r},o);if(n.once){var f=o.handler;o.handler=Object(c.f)(function(){return i.cancel(),f.apply(this,arguments)})}if(o.window&&n.errorOnClose)var d=Object(c.g)(function(){e&&"object"===(void 0===e?"undefined":un(e))&&Object(u.p)(e)&&(d.cancel(),o.handleError(new Error("Post message target window is closed")))},50);return{cancel:function(){i.cancel()}}}function an(n,t,e){return"function"==typeof t&&(e=t,t={}),(t=t||{}).name=n,t.handler=e||t.handler,cn(t)}function fn(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments[2];"function"==typeof t&&(e=t,t={}),t=t||{},e=e||t.handler;var r=t.errorHandler,o=new y.a(function(o,i){(t=t||{}).name=n,t.once=!0,t.handler=function(n){if(o(n),e)return e(n)},t.errorHandler=function(n){if(i(n),r)return r(n)}}),i=cn(t);return o.cancel=i.cancel,o}function dn(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(t,e){return an(t,n,e)}}}function sn(){delete window[a.j.POSTROBOT],window.removeEventListener("message",Q)}b.a.on=an;var ln=Object(u.c)();function wn(n){for(var t=0,e=nn.get(n,[]),r=null==e?0:e.length;t<r;t++)e[t].reject(new Error("Window cleaned up before response")).catch(c.e)}var hn=e(9);b.a.initialized||(b.a.initialized=!0,Object(c.a)(window,"message",Q),hn&&hn.openTunnelToOpener(),Object(i.c)()),e.d(t,"markWindowKnown",function(){return i.e}),e.d(t,"serializeMessage",function(){return R}),e.d(t,"deserializeMessage",function(){return N}),e.d(t,"ProxyWindow",function(){return S}),e.d(t,"cleanUpWindow",function(){return wn}),e.d(t,"Promise",function(){return y.a}),e.d(t,"bridge",function(){return hn}),e.d(t,"parent",function(){return ln}),e.d(t,"send",function(){return en}),e.d(t,"requestPromises",function(){return nn}),e.d(t,"request",function(){return tn}),e.d(t,"sendToParent",function(){return rn}),e.d(t,"client",function(){return on}),e.d(t,"on",function(){return an}),e.d(t,"listen",function(){return cn}),e.d(t,"once",function(){return fn}),e.d(t,"listener",function(){return dn}),e.d(t,"CONFIG",function(){return a.b}),e.d(t,"disable",function(){return sn}),t.default=r},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(6);e.d(t,"openBridge",function(){return r.openBridge}),e.d(t,"linkWindow",function(){return r.linkWindow}),e.d(t,"linkUrl",function(){return r.linkUrl}),e.d(t,"isBridge",function(){return r.isBridge}),e.d(t,"needsBridge",function(){return r.needsBridge}),e.d(t,"needsBridgeForBrowser",function(){return r.needsBridgeForBrowser}),e.d(t,"hasBridge",function(){return r.hasBridge}),e.d(t,"needsBridgeForWin",function(){return r.needsBridgeForWin}),e.d(t,"needsBridgeForDomain",function(){return r.needsBridgeForDomain}),e.d(t,"openTunnelToOpener",function(){return r.openTunnelToOpener}),e.d(t,"destroyBridges",function(){return r.destroyBridges})}])});
//# sourceMappingURL=post-robot.ie.min.js.map